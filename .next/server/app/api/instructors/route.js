"use strict";(()=>{var e={};e.id=331,e.ids=[331],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1887:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>x,patchFetch:()=>j,requestAsyncStorage:()=>h,routeModule:()=>R,serverHooks:()=>m,staticGenerationAsyncStorage:()=>E});var s={};t.r(s),t.d(s,{DELETE:()=>g,GET:()=>l,POST:()=>c,PUT:()=>d});var o=t(9303),n=t(8716),a=t(3131),i=t(7070),u=t(1103),p=t(1171);async function l(e){let r=new URL(e.url),t=parseInt(r.searchParams.get("limit")||"50",10),s=r.searchParams.get("homepage");try{let e=[];"true"===s&&e.push("show_on_homepage = true");let r=`SELECT * FROM instructors ${e.length?"WHERE "+e.join(" AND "):""} ORDER BY display_order ASC LIMIT $1`,o=await (0,u.IO)(r,[t]);return i.NextResponse.json({data:o.rows})}catch(e){return console.error(e),i.NextResponse.json({error:"Internal server error"},{status:500})}}async function c(e){try{let r=await e.json(),t=r.slug?r.slug:(0,p.l)(r.name||""),s=await (0,u.IO)("INSERT INTO instructors (name, bio, photo, expertise, slug, display_order) VALUES ($1,$2,$3,$4,$5,$6) RETURNING *",[r.name,r.bio||null,r.photo||null,r.expertise||null,t,r.display_order||999]);return i.NextResponse.json({data:s.rows[0]},{status:201})}catch(e){return console.error(e),i.NextResponse.json({error:"Internal server error"},{status:500})}}async function d(e){try{let r=await e.json();if(!r.id)return i.NextResponse.json({error:"Missing id"},{status:400});let t=r.slug?r.slug:(0,p.l)(r.name||""),s=await (0,u.IO)("UPDATE instructors SET name=$1, bio=$2, photo=$3, expertise=$4, slug=$5, display_order=$6 WHERE id=$7 RETURNING *",[r.name,r.bio||null,r.photo||null,r.expertise||null,t,r.display_order||999,r.id]);return i.NextResponse.json({data:s.rows[0]})}catch(e){return console.error(e),i.NextResponse.json({error:"Internal server error"},{status:500})}}async function g(e){try{let r=(await e.json()).id;if(!r)return i.NextResponse.json({error:"Missing id"},{status:400});return await (0,u.IO)("DELETE FROM instructors WHERE id=$1",[r]),i.NextResponse.json({success:!0})}catch(e){return i.NextResponse.json({error:"Internal server error"},{status:500})}}let R=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/instructors/route",pathname:"/api/instructors",filename:"route",bundlePath:"app/api/instructors/route"},resolvedPagePath:"/workspaces/HK/app/api/instructors/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:h,staticGenerationAsyncStorage:E,serverHooks:m}=R,x="/api/instructors/route";function j(){return(0,a.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:E})}},1103:(e,r,t)=>{t.d(r,{IO:()=>a});let s=require("pg"),o=process.env.DATABASE_URL||"postgresql://user:pass@localhost:5432/hka",n=new s.Pool({connectionString:o});async function a(e,r){return await n.query(e,r)}},1171:(e,r,t)=>{function s(e){if(!e)return"";let r={ş:"s",Ş:"s",ç:"c",Ç:"c",ğ:"g",Ğ:"g",ü:"u",Ü:"u",ö:"o",Ö:"o",ı:"i",İ:"i"};return e.split("").map(e=>r[e]||e).join("").toLowerCase().replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-")}t.d(r,{l:()=>s})}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[276,972],()=>t(1887));module.exports=s})();